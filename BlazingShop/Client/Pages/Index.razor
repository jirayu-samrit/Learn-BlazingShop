@page "/"
@page "/{tCategoryUrl}"
@inject iCategoryService oCategoryService

@if (oCategory!=null)
{
	<h1>Welcome to @oCategory.tName Section</h1>
	<CP_ProductList nCategoryId="@oCategory.nID"/>
}
else
{
	<h1>Welcome to Blazing Shop!</h1>
	<CP_ProductList />
}

@code
{
	[Parameter]
	public string tCategoryUrl { get; set; }

	private cmCategory oCategory { get; set; } = null;

	protected override void OnParametersSet()
	{
		if(String.IsNullOrEmpty(tCategoryUrl) == false)
		{
			oCategory = oCategoryService.aoCategories.FirstOrDefault(c => c.tUrl.ToLower() == tCategoryUrl.ToLower());
		}
		else
		{
			oCategory = null;
		}
	}
}